#!/bin/sh

##
## Wallpaper script
##

_main() {
  local workspace=""

  while [ "$#" -gt 0 ]; do
    case "$1" in
      -w|--workspace) workspace="$2"; shift 2 ;;

      --workspace=*) workspace="${1#*=}"; shift 1 ;;

      *) echo "Unknown argument: $1"; exit 1 ;;
    esac
  done

  [ -z "$workspace" ] && { echo "Workspace missing"; exit 1; }

  ## Get all loaded wallpapers
  wallpapers=$(/usr/bin/hyprctl hyprpaper listloaded)

  index=1

  for wallpaper in $wallpapers; do
    if [ "$index" = "$workspace" ]; then
      /usr/bin/hyprctl \
        hyprpaper \
        wallpaper \
        ",$wallpaper"

      break
    fi

    index=$((index + 1))
  done
}

_main "$@"
